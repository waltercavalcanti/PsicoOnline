@page "/responsavel"
@page "/responsavel/{id:int}"
@inject IResponsavelService ResponsavelService

<CabecalhoComponent Titulo="@titulo" />

<EditForm Model="responsavel" OnValidSubmit="SubmeterAsync">
	<DataAnnotationsValidator />
	<MudCard>
		<MudCardContent>
			<MudTextField Label="Nome" Variant="Variant.Outlined" Margin="Margin.Dense" Clearable="true" Immediate="true" Counter="300"
						  @bind-Value="responsavel.Nome" For="@(() => responsavel.Nome)" />
			<MudDatePicker Label="Data de Nascimento" Variant="Variant.Outlined" Margin="Margin.Dense" Editable="true" Mask="@(new DateMask("dd/MM/yyyy"))" DateFormat="dd/MM/yyyy"
						   @bind-Date="responsavel.DataNascimento" For="@(() => responsavel.DataNascimento)" />
			<br />
			<MudTextField Label="Telefone" Variant="Variant.Outlined" Margin="Margin.Dense" Clearable="true" Immediate="true" Counter="11"
						  @bind-Value="responsavel.Telefone" For="@(() => responsavel.Telefone)" />
			<GeneroComponent Responsavel="@responsavel" />
		</MudCardContent>
	</MudCard>
	<br />
	<MudButton Variant="Variant.Outlined" EndIcon="@Icons.Material.Filled.Save" Color="Color.Primary" ButtonType="ButtonType.Submit">@btnText</MudButton>&nbsp;
	@if (Id != null)
	{
		var mensagem = $"Confirma a exclusão do responsável {responsavel.Nome}?";
			<ConfirmarExclusaoComponent Mensagem="@mensagem" DeleteAsync="DeleteResponsavelAsync" />
	}
</EditForm>
